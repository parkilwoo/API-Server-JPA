# szs
삼쩜삼 과제테스트 Repository
# API구축문제

## 1. 회원가입 
  - 구현여부 : OK
  - 구현방법 : 입력정보를 RequestBody로 받은 후, 유효한 회원(이름&주민번호) 및 중복ID Validation 후 Hibernate를 이용하여 Insert
  - 성공응답 :  
<img width="219" alt="스크린샷 2022-03-18 오후 7 48 55" src="https://user-images.githubusercontent.com/56834479/158989623-cf381e17-e6c8-4a19-a360-caba0d829ac5.png"><img width="135" alt="스크린샷 2022-03-18 오후 7 51 21" src="https://user-images.githubusercontent.com/56834479/158989942-03a63189-15e0-4e40-a2fb-2e7c782829cb.png">
  - 실패응답 :  
파라미터 없을경우   
<img width="188" alt="스크린샷 2022-03-18 오후 8 04 07" src="https://user-images.githubusercontent.com/56834479/158991840-a5daea7e-62d1-4fd7-9037-7cc8227abd0d.png"> <img width="189" alt="스크린샷 2022-03-18 오후 8 13 38" src="https://user-images.githubusercontent.com/56834479/158993232-8a3aa577-2265-41b8-ae09-7bc07de43648.png"> <img width="192" alt="스크린샷 2022-03-18 오후 8 12 55" src="https://user-images.githubusercontent.com/56834479/158993137-d9aaa54a-94b8-44ea-9566-6be4b8af8a63.png"> <img width="233" alt="스크린샷 2022-03-18 오후 8 14 06" src="https://user-images.githubusercontent.com/56834479/158993295-c9a03f55-dee3-47a5-8185-89724e84d17b.png">  
유효하지 않은 회원  
<img width="233" alt="스크린샷 2022-03-18 오후 8 18 59" src="https://user-images.githubusercontent.com/56834479/158993958-c7c9c46d-bfad-4e07-95b3-865088ad6171.png"> <img width="224" alt="스크린샷 2022-03-18 오후 8 23 32" src="https://user-images.githubusercontent.com/56834479/158994528-c0fdfd0f-ede7-4564-a3be-04dfa4286b44.png">  
이미 가입한 주민등록번호 OR 계정  
<img width="218" alt="스크린샷 2022-03-18 오후 8 25 31" src="https://user-images.githubusercontent.com/56834479/158994807-ff4a1769-c037-48d9-a9ec-829221a1892c.png"> <img width="220" alt="스크린샷 2022-03-18 오후 8 27 43" src="https://user-images.githubusercontent.com/56834479/158995202-55751403-f9dc-4ff0-bff8-588c5cc3fc27.png">  


CODE : 101(ValidationException) / 102(가입할 수 있는 회원이 아닐경우) / 103(중복된 주민등록번호 OR 계정)
## 2. 로그인
  - 구현여부 : OK
  - 구현방법 : 아이디와 비밀번호 RequestBody로 받은 후, 해당 비밀번호를 Encrypt한 후 DB조회
  - 성공응답 :  
<img width="1215" alt="스크린샷 2022-03-18 오후 8 34 47" src="https://user-images.githubusercontent.com/56834479/158996050-6f32b3be-4d25-4ea0-acd2-c982fb240f02.png"> 로그인 성공시 JWT 발행
  - 실패응답 :  
없는 ID일 경우 OR 비밀번호가 맞지 않을경우  
<img width="183" alt="스크린샷 2022-03-18 오후 8 40 29" src="https://user-images.githubusercontent.com/56834479/158996799-54f01607-65c1-424f-8090-7d68654eb7f9.png"> <img width="230" alt="스크린샷 2022-03-18 오후 8 41 21" src="https://user-images.githubusercontent.com/56834479/158996917-8f63647a-56e5-49a5-8d88-0ea7b8b8c4e6.png">  

CODE : 201(없는 ID) / 202(맞지않는 비밀번호)    
## 3. 나의정보  
 - 구현여부 : OK
 - 구현방법 : Token을 RequestHeader에 받아서, 토큰에 등록된 정보로 유저 정보를 Return
 - 성공응답 :  
<img width="234" alt="스크린샷 2022-03-18 오후 8 57 04" src="https://user-images.githubusercontent.com/56834479/158998997-bd1860d2-3ced-444a-b3fe-3fdfe77550e0.png">

## 4. 스크랩  
 - 구현여부 : OK
 - 구현방법 : Token을 RequestHeader에 받아서, 토큰에 등록된 정보로 유저 정보를 가지고 이름과 주민번호로 POST 요청하여 스크랩 정보 적재 및 Return
 - 성공응답 :  
<img width="306" alt="스크린샷 2022-03-18 오후 9 02 24" src="https://user-images.githubusercontent.com/56834479/158999652-55fb2605-c0f0-4ed6-bf39-26b15a569ae0.png"> <img width="347" alt="스크린샷 2022-03-18 오후 9 02 50" src="https://user-images.githubusercontent.com/56834479/158999701-ad78829f-8eea-4640-84f5-e5e8418b23f0.png">
 - 실패응답 :  
Http응답 통신코드로 Code 내보냄  
<img width="334" alt="스크린샷 2022-03-18 오후 9 16 08" src="https://user-images.githubusercontent.com/56834479/159001538-4c33c387-4edc-4411-b709-2f070bbfa9a2.png">


문제에서 말씀하셨던 제공되는 URL의 문제점은 찾지 못하였습니다..!(많은 테스트를 진행했지만 연결이 잘 되었습니다) 꼭 알고 싶습니다.
## 5. 환급액 구하기
 - 구현여부 : OK
 - 구현방법 : Token을 RequestHeader에 받아서, 토큰에 등록된 정보로 유저 정보를 가지고 Scrap한 정보들을 DB에서 조회 후 계산
 - 성공응답 :  
<img width="183" alt="스크린샷 2022-03-18 오후 9 04 10" src="https://user-images.githubusercontent.com/56834479/158999847-8529ee87-7d3c-42b7-ab7c-a89b9586009f.png">. 
 - 실패응답 :  
스크랩을 하지 않았을 경우. 
<img width="239" alt="스크린샷 2022-03-18 오후 9 18 51" src="https://user-images.githubusercontent.com/56834479/159001720-d72e4875-ac75-4d2a-8e67-eb58eda51fe1.png">  

## Swagger주소 : http://localhost:8080/swagger-ui/index.html

# 주관식 과제

## 5. 일정이 촉박한 프로젝트를 진행하게 되었습니다. 이 경우 본인의 평소 습관에 맞춰 개발을 진행할지, 회사의 코드 컨벤션에 맞춰 개발할지 선택해 주세요. 그리고 그 이유를 서술해 주세요.  
답변 : 저는 회사의 코드 컨벤션에 맞출것입니다. 답변에 앞서 저는 대부분의 프로젝트를 촉박한 일정으로 진행하였습니다. 하지만 그 때 마다 진행기간 안에 마무리를 하곤 했습니다. 이렇게 할 수 있던 원동력은 바로 코딩자체를 재밌어하고 즐기기 때문입니다! 어짜피 업무가 일찍 끝나도 하는것은 지인을 만나는것 아니면(잘 만나지도 않습니다.) 대부분 코딩이나 프로그래밍 공부입니다. 이렇듯 저의 가장 큰 장점이라 생각하는 코딩을 재밌어 한다는 점에서는 저는 일정에 맞출 자신 있습니다.(일례로, 이번에 1개월 만에 오픈한 큰 프로젝트가 있었습니다. 이 프로젝트를 진행하였을때도, 주중 2~3시간 야근은 물론 주말 출근도 마다하지 않았습니다! 다만, 그만큼 노력에 대한 보상이 있다면 좋을것 같습니다!)  

## 6. 민감정보 암호화 알고리즘에는 어떤 것들이 있고, 그중 선택하신다면 어떤 것을 선택하실 건가요? 그 이유는 무엇인가요?
답변 : 암호화 알고리즘에는 크게 3가지가 있습니다. 대칭형 암호화, 비대칭형 암호화(이 둘을 묶어서 양방향 암호화라고 합니다.) 마지막으로 단방향 암호화가 있습니다. 먼저 대칭형 암호화와 비대칭형 암호화는 암,복호화가 가능하다는 점에서 양방향 암호화라고 합니다. 둘의 차이를 말하자면, 먼저 대칭형 암호화는 암호화에서 사용한 키값과 복호화에 사용한 키값이 동일합니다. 쉽게말해 클라이언트에서 특정 키로 암호화한 값이 서버에서도 같은 키값으로 복호화가 가능합니다. 물론 역방향도 가능합니다. 구현이 상대적으로 쉽고 가볍다는 장점이 있지만, 가장 큰 문제인 키값 전달에 문제가 있습니다. 송신 측에서는 수신 측에 암호화키를 전달해야만 하는데, 이 키가 배송 과정에서 해킹을 당하면 아무리 뛰어난 암호화 알고리즘을 사용했더라도 복호화가 되버립니다. 이러한 문제를 해결하기 위해 나온것이 비대칭형 암호화(공개키 암호화)입니다. 이 방식은 한 쌍의 암호화 key쌍을 만들고, 하나는 모든사람에게 공개 가능한 '공개키'로 나머지 하나는 서버만 알고있는 '개인키'로 정합니다. '공개키'로 암호화 된것은 '개인키'로만 복호화가 가능하고, '개인키'로 암호화 된것은 '공개키'로만 복호화가 가능합니다. 이렇듯 비대칭형 암호화는 대칭형 암호화의 큰 문제은 키값 전달에 문제를 해결할 수 있지만, 구현이 복잡하며 대칭형 암호화에 비해 속도가 상대적을로 느리다는 단점이 있습니다. 이러한 문제로 비대칭형 암호를 이용해서 대칭형 암호화의 키를 배송하고 실제 암호문은 대칭형 암호를 사용하는 식으로 상호보완적으로 이용하는 것이 일반적입니다.
마지막으로 단방향 암호화는 복호화가 불가능한 암호화 방식입니다. 암호화에 키값을 이용하지 않고 해싱을 이용한다는 특징이 있습니다. 복호화가 불가능 하므로 위에 소개한 양방향 암호화 보다 훨씬 안전합니다. 사용의 예로는, 회원가입시 비밀번호를 입력하면 해당 값을 단방향 암호화를 진행한 후 데이터베이스에 적재를 합니다. 그 후 로그인 시 유저가 입력한 비밀번호를 같은 알고리즘을 이용해 단방향 암호화를 하고 데이터베이스 적재된 값과 비교 후 같은값인지 판단합니다. 하지만 단방향 암호화도 의심되는 평문을 암호화하여 비교하는식으로 정보를 탈취할 수 있기때문에, 그걸 대비한 방법으로 SALT값(소금을 친다는 의미로 임의의 값)을 추가하여 해싱처리를해 한층 더 보안을 강화 하였습니다.  
저는 개인적으로 단방향 암호화를 좋아하고 지금까지 프로젝트 대부분을 단방향 암호화로 진행하였습니다. 하지만 이번 과제처럼 암호화한 정보를 복호화해서 보여줘야 할 경우(비밀번호, 주민등록번호)에는 양방향 암호화를 사용하였습니다. 과제에서는 AES알고리즘을 사용하여 대칭형 암호화로 진행하였습니다. 


# PS
과제를 하면서 개인적으로 아쉬움이 남은점이 있습니다. 제가 요즘 많이들 시행하는 TDD기반의 작업을 한번도 진행해보지 않았습니다.(테스트코드도 Mockito는 사용해본적이 없습니다..)  
이번 과제를 진행하면서 Mockito를 이용한 TDD를 해보고 싶었지만, 코로나 확진으로 인해 겨를이 없었습니다..  
변명과 아쉬움은 뒤로하고 만약 제가 입사를 하게 된다면, 꼭 입사전까지 TDD를 구현해보겠습니다!
